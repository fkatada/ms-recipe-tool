{
  "name": "Generate Document from Docpack",
  "description": "Extract a docpack file and use its contents to generate the final document using the document generator.",
  "inputs": {
    "docpack_path": {
      "description": "Path to the .docpack file to extract and process",
      "type": "string",
      "default": "output/example.docpack"
    },
    "output_root": {
      "description": "Directory for final document output",
      "type": "string",
      "default": "output"
    },
    "model": {
      "description": "LLM model to use for document generation",
      "type": "string",
      "default": "openai/gpt-4o"
    }
  },
  "steps": [
    {
      "type": "set_context",
      "config": {
        "key": "extract_dir",
        "value": "{{ output_root }}/docpack_extracted"
      }
    },
    {
      "type": "docpack_extract",
      "config": {
        "docpack_path": "{{ docpack_path }}",
        "extract_dir": "{{ extract_dir }}",
        "output_key": "extraction_result"
      }
    },
    {
      "type": "set_context",
      "config": {
        "key": "outline_file",
        "value": "{{ extract_dir }}/outline.json"
      }
    },
    {
      "type": "set_context",
      "config": {
        "key": "recipe_root",
        "value": "recipes/document_generator"
      }
    },
    {
      "type": "execute_recipe",
      "config": {
        "recipe_path": "recipes/document_generator/document_generator_recipe.json"
      }
    }
  ]
}